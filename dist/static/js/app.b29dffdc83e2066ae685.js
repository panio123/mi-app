webpackJsonp([6,7],{101:function(t,e){},102:function(t,e){},103:function(t,e){},104:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"weui_loading_toast"},[n("div",{staticClass:"weui_mask_transparent"}),t._v(" "),n("div",{staticClass:"weui_toast",style:{position:t.position}},[n("i",{staticClass:"weui-loading weui-icon_toast"}),t._v(" "),n("p",{staticClass:"weui_toast_content"},[t._v(t._s(t.text||"加载中")),t._t("default")],2)])])},staticRenderFns:[]}},105:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},staticRenderFns:[]}},106:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"vux-toast"},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.isShowMask&&t.show,expression:"isShowMask && show"}],staticClass:"weui_mask_transparent"}),t._v(" "),n("transition",{attrs:{name:t.transition}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"weui_toast",class:t.toastClass,style:{width:t.width}},[n("i",{directives:[{name:"show",rawName:"v-show",value:"text"!==t.type,expression:"type !== 'text'"}],staticClass:"weui_icon_toast"}),t._v(" "),t.text?n("p",{staticClass:"weui_toast_content",style:t.style,domProps:{innerHTML:t._s(t.text)}}):n("p",{staticClass:"weui_toast_content"},[t._t("default")],2)])])],1)},staticRenderFns:[]}},110:function(t,e,n){n(101);var o=n(20)(n(60),n(104),null,null);t.exports=o.exports},111:function(t,e,n){n(103);var o=n(20)(n(61),n(106),null,null);t.exports=o.exports},113:function(t,e){},114:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(12),i=n.n(o),a=n(54),s=n.n(a),c=n(33),u=n(53),r=n(36),l=(n.n(r),n(52)),d=n(34),m=n(35);i.a.use(d.a),i.a.use(m.a);for(var p in l.a)i.a.directive(p,l.a[p]);window.App=new i.a({el:"#app",router:c.a,store:u.a,template:"<App/>",components:{App:s.a},created:function(){var t=window.localStorage.getItem("mi_app_loginstatus");t&&"1"===t&&(this.$store.commit("login"),this.$store.dispatch("cartList"))}})},33:function(t,e,n){"use strict";var o=n(12),i=n.n(o),a=n(107),s=n.n(a),c=n(58);i.a.use(s.a),e.a=new s.a(c.a)},52:function(t,e,n){"use strict";var o=n(33);e.a={back:{inserted:function(t,e){t.addEventListener("click",function(){var t=e.value;t&&1==t.length&&"function"==typeof t?t(function(t){t===!0&&o.a.back()}):o.a.back()})}},link:{inserted:function(t,e){t.addEventListener("click",function(){o.a.push(e.value)})}}}},53:function(t,e,n){"use strict";var o=n(63),i=n.n(o),a=n(12),s=n.n(a),c=n(109),u=n.n(c),r=n(55),l=n(59),d=n(34),m=n(35);s.a.use(d.a),s.a.use(m.a),s.a.use(u.a),e.a=new u.a.Store({strict:!1,state:{_userInfo:{name:"Alex-Hanson",id:"164638971",img:"http://dl2.files.xiaomi.net/mfsv2/download/fdsc3/p01RAr6ogApd/pQSyU49NiOJZve.jpg?thumb=150x150"},_loginStatus:!1,_cartList:""},getters:{getUserInfo:function(t){return t._loginStatus!==!0?{img:"http://m.mi.com/views/user/index/img/avatar_e29d6cb.png",name:"点击登录",id:""}:t._userInfo},getLoginStatus:function(t){return t._loginStatus},getCartList:function(t){return t._loginStatus!==!0?"":t._cartList}},mutations:{login:function(t){t._loginStatus===!1&&(t._loginStatus=!0,window.localStorage.setItem("mi_app_loginstatus",1))},logout:function(t){t._loginStatus=!1,window.localStorage.removeItem("mi_app_loginstatus")},getCartList:function(t,e){t._cartList=e},checkGoods:function(t,e){e.is_available=!e.is_available,n.i(l.a)(t._cartList)},changeGoodsNum:function(t,e){var o=new Number(e.item.price),i=e.num-e.item.num,a=i*o;e.item.num=e.num,e.item.subtotal+=a,e.item.is_available&&(t._cartList.totalSelGoods+=i,t._cartList.productMoneySelGoods+=a),n.i(l.b)(t._cartList)},createdNewGoods:function(t,e){t._cartList.items.push(e),n.i(l.a)(t._cartList),s.a.$vux.toast.show({text:"添加成功",position:"bottom"})},addGoods:function(t,e){n.i(l.c)(t._cartList,e.item,e.num),n.i(l.b)(t._cartList)},delGoods:function(t,e){t._cartList.items.splice(e,1),n.i(l.a)(t._cartList)}},actions:{login:function(t){if(t.state._loginStatus!==!0)return s.a.$vux.loading.show({text:"登录中..."}),new i.a(function(e,n){setTimeout(function(){t.commit("login"),s.a.$vux.loading.hide(),e()},500)})},cartList:function(t){if(t.state._loginStatus===!0&&!t.state._cartList){var e=window.localStorage.getItem("mi_app_cart_list");return e?void t.commit("getCartList",JSON.parse(e)):new i.a(function(e,n){setTimeout(function(){r.a.cart_list.get().then(function(n){var o=n.body.data;t.commit("getCartList",o),e()})},800)})}},appendNewGoods:function(t,e){return new i.a(function(n,o){t.state._loginStatus===!1?t.dispatch("login").then(function(){t.dispatch("cartList").then(function(){t.dispatch("startAppendNewGoods",e),n()})}):(t.dispatch("startAppendNewGoods",e),setTimeout(function(){n()},200))})},startAppendNewGoods:function(t,e){var o=!1,i=void 0;s.a.$vux.loading.show({text:"添加至购物车"}),t.state._cartList.items.forEach(function(n){n.commodity_id===e.commodityId&&(console.log(n.commodity_id,e.commodityId),t.commit("addGoods",{item:n}),o=!0)}),o===!1&&r.a.getProduct(e.id).get().then(function(o){var a=o.body.data;a.commodity_list.forEach(function(t){t.commodity_id===e.commodityId&&(t.product_id=e.id,i=n.i(l.d)(t))}),t.commit("createdNewGoods",i)}),s.a.$vux.loading.hide()}}})},54:function(t,e,n){n(102);var o=n(20)(n(62),n(105),null,null);t.exports=o.exports},55:function(t,e,n){"use strict";var o=n(12),i=n.n(o),a=n(36),s=n.n(a);i.a.use(s.a);var c=[3525,4082,4484,4520,4694,4696,4697,2274,4767],u={getProduct:function(t){var e=void 0,n=void 0;return c.forEach(function(n){t==n&&(e=!0)}),n=e===!0?t:c[Math.round(6*Math.random())],i.a.resource("static/json/product_"+n+".json")},homeList:i.a.resource("static/json/home.json"),homeList2:i.a.resource("static/json/home2.json"),search_default:i.a.resource("static/json/search_default.json"),word_list:i.a.resource("static/json/word_list.json"),category:i.a.resource("static/json/category.json"),category_list:i.a.resource("static/json/category_list.json"),recommend:i.a.resource("static/json/recommendBlank.json"),cart_list:i.a.resource("static/json/cart.json")};e.a=u},58:function(t,e,n){"use strict";var o=function(t){return n.e(0).then(function(){return t(n(121))}.bind(null,n)).catch(n.oe)},i=function(t){return n.e(0).then(function(){return t(n(123))}.bind(null,n)).catch(n.oe)},a=function(t){return n.e(0).then(function(){return t(n(122))}.bind(null,n)).catch(n.oe)},s=function(t){return n.e(2).then(function(){return t(n(119))}.bind(null,n)).catch(n.oe)},c=function(t){return n.e(2).then(function(){return t(n(120))}.bind(null,n)).catch(n.oe)},u=function(t){return n.e(1).then(function(){return t(n(124))}.bind(null,n)).catch(n.oe)},r=function(t){return n.e(1).then(function(){return t(n(125))}.bind(null,n)).catch(n.oe)},l=function(t){return n.e(3).then(function(){return t(n(117))}.bind(null,n)).catch(n.oe)},d=function(t){return n.e(4).then(function(){return t(n(118))}.bind(null,n)).catch(n.oe)},m={routes:[{path:"/",name:"home",meta:"",component:o},{path:"/home",name:"home",meta:"",component:o},{path:"/search",name:"search",meta:"小米商城-搜索",component:i},{path:"/category",name:"category",meta:"小米商城-商品分类",component:s},{path:"/category/list",name:"category_list",component:c},{path:"/product",name:"product",meta:"小米商城-商品详情",component:a},{path:"/cart",name:"cart",meta:"小米商城-购物车",component:l},{path:"/login",name:"login",meta:"小米商城-登录",component:d},{path:"/my",name:"my",meta:"小米商城-个人中心",component:u},{path:"/set",name:"set",meta:"小米商城-个人设置",component:r}]};e.a=m},59:function(t,e,n){"use strict";function o(t){window.localStorage.setItem("mi_app_cart_list",u()(t))}function i(t,e){console.log(t);var n={addTime:Date.now(),buy_limit:10,can_change_num:e||!0,can_delete:e||!0,commodity_id:t.commodity_id,product_id:t.product_id,elementsGoods:!1,goodsId:t.goods_list[0].goods_id,image_url:t.img_url,is_available:!0,is_batched:t.is_batched,is_cos:t.is_cos,itemId:"",num:1,price:t.goods_list[0].price,product_name:t.name,salePrice:t.goods_list[0].price,sel_status:t.is_sale,short_name:t.name,showType:"buy",sku:"",subtotal:new Number(t.goods_list[0].price).valueOf(),updateTime:Date.now()};return console.log("newGoods",n),n}function a(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=new Number(e.salePrice)*n;e.num+=n,e.subtotal+=o,t.totalSelGoods+=n,t.productMoneySelGoods+=o,t.total+=n,t.productMoneySelGoods=new Number(t.productMoneySelGoods.toFixed(2)).valueOf()}function s(t){var e=0,n=0,i=0,a=0;console.log(t),t.items.forEach(function(t){console.log(t),e+=t.num,i+=new Number(t.price)*t.num,t.is_available===!0&&(n+=t.num,a+=new Number(t.price)*t.num)}),t.total=e,t.totalSelGoods=n,t.totalprice=i,t.productMoneySelGoods=a,o(t)}var c=n(56),u=n.n(c);e.b=o,e.d=i,e.c=a,e.a=s},60:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:{value:{type:Boolean,default:!1},text:String,position:String},created:function(){this.show=this.value},data:function(){return{show:!1}},watch:{value:function(t){this.show=t},show:function(t){this.$emit("input",t)}}}},61:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:{value:Boolean,time:{type:Number,default:2e3},type:{type:String,default:"success"},transition:{type:String,default:"vux-fade"},width:{type:String,default:"7.6em"},isShowMask:{type:Boolean,default:!1},text:String},data:function(){return{show:!1}},created:function(){this.value&&(this.show=!0)},computed:{toastClass:function(){return{weui_toast_forbidden:"warn"===this.type,weui_toast_cancel:"cancel"===this.type,weui_toast_success:"success"===this.type,weui_toast_text:"text"===this.type}},style:function(){if("text"===this.type&&"auto"===this.width)return{padding:"10px"}}},watch:{show:function(t){var e=this;t&&(this.$emit("input",!0),this.$emit("on-show")),t&&(clearTimeout(this.timeout),this.timeout=setTimeout(function(){e.show=!1,e.$emit("input",!1),e.$emit("on-hide")},this.time))},value:function(t){this.show=t}}}},62:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"app"}}},[114]);
//# sourceMappingURL=app.b29dffdc83e2066ae685.js.map